<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="YVTU">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://yvtucn.github.io/2025/05/07/swift-语法/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
    
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/rabbit.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/rabbit.svg">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/rabbit.svg">
    <!--- Page Info-->
    
    <title>
        
            Swift 语法 | YVTU
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/css/build/tailwind.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
    
    
    
    

    <script id="hexo-configurations">
    window.config = {"hostname":"yvtucn.github.io","root":"/","language":"en","path":"search.json"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"delete_mask":false,"title_alignment":"left","headings_top_spacing":{"h1":"3.2rem","h2":"2.4rem","h3":"1.9rem","h4":"1.6rem","h5":"1.4rem","h6":"1.3rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":false,"auto":false,"list":[]},"code_block":{"copy":true,"style":"simple","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":4,"number":false,"expand":true,"init_open":true},"copyright":{"enable":false,"default":"cc_by_nc_sa"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"dark"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":false},"website_counter":{"url":"https://cn.vercount.one/js","enable":false,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":false,"custom_message":null},"open_graph":{"enable":false,"image":"/images/redefine-og.webp","description":null},"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/wallhaven-wqery6-light.webp","dark":"/images/wallhaven-wqery6-dark.webp"},"title":"YVTU","subtitle":{"text":["Chasing Myths, Touching Stars."],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":false,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":false,"style":"default","links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":null},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"11.4.1"}},"version":"2.8.2","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Bookmarks":{"icon":"fa-solid fa-bookmark","path":"/bookmarks/"},"About":{"icon":"fa-regular fa-user","path":"/about/"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":false,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":null},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2025/4/21 00:00:00"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 7.3.0"></head>



<body>
	<div class="progress-bar-container">
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
                <a class="logo-image h-8 w-8 sm:w-10 sm:h-10 mr-3" href="/">
                    <img src="/images/rabbit.svg" class="w-full h-full rounded-sm">
                </a>
            
            <a class="logo-title" href="/">
                
                YVTU
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    HOME
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    ARCHIVES
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/bookmarks/"
                                        >
                                    <i class="fa-solid fa-bookmark fa-fw"></i>
                                    BOOKMARKS
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/about/"
                                        >
                                    <i class="fa-regular fa-user fa-fw"></i>
                                    ABOUT
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                HOME
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                ARCHIVES
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/bookmarks/"
                        >
                            <span>
                                BOOKMARKS
                            </span>
                            
                                <i class="fa-solid fa-bookmark fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/about/"
                        >
                            <span>
                                ABOUT
                            </span>
                            
                                <i class="fa-regular fa-user fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">6</div>
        <div class="label text-third-text-color text-sm">Tags</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">3</div>
        <div class="label text-third-text-color text-sm">Categories</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">57</div>
        <div class="label text-third-text-color text-sm">Posts</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			<div class="w-full flex items-center pt-6 justify-start">
				<h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">Swift 语法</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="/images/rabbit.svg">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">YVTU</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2025-05-07 11:46:45</span>
        <span class="mobile">2025-05-07 11:46:45</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-05-07 14:25:57</span>
            <span class="mobile">2025-05-07 14:25:57</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
    

    
    
    
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<h2 id="语法基础"><a href="#语法基础" class="headerlink" title="语法基础"></a>语法基础</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>变量是可变的，使用 var 修饰，常量是不可变的，使用 let 修饰。类、结构体和枚举里的变量是属性。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v1:<span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;hi&quot;</span> <span class="comment">// 标注类型</span></span><br><span class="line"><span class="keyword">var</span> v2 <span class="operator">=</span> <span class="string">&quot;类型推导&quot;</span></span><br><span class="line"><span class="keyword">let</span> l1 <span class="operator">=</span> <span class="string">&quot;标题&quot;</span> <span class="comment">// 常量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">a</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> p1 <span class="operator">=</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">var</span> p2: <span class="type">Int</span> &#123;</span><br><span class="line">        p1 <span class="operator">*</span> <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>属性没有 set 可以省略 get，如果有 set 需加 get。变量设置前通过 willSet 访问到，变量设置后通过 didSet 访问。</p>
<h3 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h3><p>控制台打印值</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hi&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> i <span class="operator">=</span> <span class="number">14</span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;9月<span class="subst">\(i)</span>是小柠檬的生日&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span><span class="operator">...</span><span class="number">3</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用terminator使循环打印更整洁</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span><span class="operator">...</span><span class="number">3</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(i)</span> &quot;</span>, terminator: <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure></div>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">多行注释第一行。</span></span><br><span class="line"><span class="comment">多行注释第二行。</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="comment">// MARK: 会在 minimap 上展示</span></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 待做</span></span><br><span class="line"><span class="comment">// <span class="doctag">FIXME:</span> 待修复</span></span><br></pre></td></tr></table></figure></div>
<h3 id="可选"><a href="#可选" class="headerlink" title="!?可选"></a>!?可选</h3><p>可能会是 nil 的变量就是可选变量。当变量为 nil 通过??操作符可以提供一个默认值。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o: <span class="type">Int</span>? <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line"><span class="keyword">let</span> i <span class="operator">=</span> o <span class="operator">??</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></div>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0345-if-let-shorthand.md" >SE-0345 if let shorthand for shadowing an existing optional variable<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 引入的新语法，用于 unwrapping optinal。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1: <span class="type">String</span>? <span class="operator">=</span> <span class="string">&quot;hey&quot;</span></span><br><span class="line"><span class="keyword">let</span> s2: <span class="type">String</span>? <span class="operator">=</span> <span class="string">&quot;u&quot;</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> s1 &#123;</span><br><span class="line">    <span class="built_in">print</span>(s1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> s1, <span class="keyword">let</span> s2 <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(s1 <span class="operator">+</span> <span class="string">&quot; &quot;</span> <span class="operator">+</span> s2)</span><br></pre></td></tr></table></figure></div>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>闭包也可以叫做 lambda，是匿名函数，对应 OC 的 block。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>].sorted(by: &#123; (l: <span class="type">Int</span>, r: <span class="type">Int</span>) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> l <span class="operator">&lt;</span> r</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 如果闭包是唯一的参数并在表达式最后可以使用结尾闭包语法，写法简化为</span></span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>].sorted &#123; (l: <span class="type">Int</span>, r: <span class="type">Int</span>) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> l <span class="operator">&lt;</span> r</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 已知类型可以省略</span></span><br><span class="line"><span class="keyword">let</span> a3 <span class="operator">=</span> [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>].sorted &#123; l, r <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> l <span class="operator">&lt;</span> r</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 通过位置来使用闭包的参数，最后简化如下：</span></span><br><span class="line"><span class="keyword">let</span> a4 <span class="operator">=</span> [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>].sorted &#123; <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="variable">$1</span> &#125;</span><br></pre></td></tr></table></figure></div>
<p>函数也是闭包的一种，函数的参数也可以是闭包。@escaping 表示逃逸闭包，逃逸闭包是可以在函数返回之后继续调用的。@autoclosure 表示自动闭包，可以用来省略花括号。</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0326-extending-multi-statement-closure-inference.md" >SE-0326<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 提高了 Swift 对闭包使用参数和类型推断的能力。如下代码：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a <span class="operator">=</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> r <span class="operator">=</span> a.map &#123; i <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> i <span class="operator">&gt;=</span> <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(i)</span> 大于等于2&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(i)</span> 小于2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(r)</span><br></pre></td></tr></table></figure></div>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>函数可以作为另一个函数的参数，也可以作为另一个函数的返回。函数是特殊的闭包，在类、结构体和枚举中是方法。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为参数设置默认值</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f1</span>(<span class="params">p</span>: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;p&quot;</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="string">&quot;p is <span class="subst">\(p)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为参数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f2</span>(<span class="params">fn</span>: (<span class="type">String</span>) -&gt; <span class="type">String</span>, <span class="params">p</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(p)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f2(fn:f1, p: <span class="string">&quot;d&quot;</span>)) <span class="comment">// p is d</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为返回值</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f3</span>(<span class="params">p</span>: <span class="type">String</span>) -&gt; (<span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> f1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f3(p: <span class="string">&quot;yes&quot;</span>)(<span class="string">&quot;no&quot;</span>)) <span class="comment">// p is no</span></span><br></pre></td></tr></table></figure></div>
<p>函数可以返回多个值，函数是可以嵌套的，也就是函数里内可以定义函数，函数内定义的函数可以访问自己作用域外函数内的变量。inout 表示的是输入输出参数，函数可以在函数内改变输入输出参数。defer 标识的代码块会在函数返回之前执行。</p>
<p>函数在 Swift 5.4 时开始有了使用多个变量参数的能力，使用方法如下：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">f4</span>(<span class="params">s</span>: <span class="type">String</span>..., <span class="params">i</span>: <span class="type">Int</span>...) &#123;</span><br><span class="line">    <span class="built_in">print</span>(s)</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f4(s: <span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>, i: <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">/// [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;]</span></span><br><span class="line"><span class="comment">/// [1, 2, 3]</span></span><br></pre></td></tr></table></figure></div>
<p>嵌套函数可以重载，嵌套函数可以在声明函数之前调用他。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">f5</span>() &#123;</span><br><span class="line">    nf5()</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">nf5</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;this is nested function&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">f5() <span class="comment">// this is nested function</span></span><br></pre></td></tr></table></figure></div>
<h3 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h3><p>在 Xcode 里的 target 就是模块，使用 import 可导入模块。模块内包含源文件，每个源文件里可以有多个类、结构体、枚举和函数等多种类型。访问级别可以通过一些关键字描述，分为如下几种：</p>
<ul>
<li>open：在模块外可以调用和继承。</li>
<li>public：在模块外可调用不可继承，open 只适用类和类成员。</li>
<li>internal：默认级别，模块内可跨源文件调用，模块外不可调用。</li>
<li>fileprivate：只能在源文件内访问。</li>
<li>private：只能在所在的作用域内访问。</li>
</ul>
<p>重写继承类的成员，可以设置成员比父类的这个成员更高的访问级别。Setter 的级别可以低于对应的 Getter 的级别，比如设置 Setter 访问级别为 private，可以在属性使用 private(set) 来修饰。</p>
<h3 id="Regex"><a href="#Regex" class="headerlink" title="Regex"></a>Regex</h3><p>标准库多了个 Regex<Output> 类型，Regex 语法与 Perl、Python、Ruby、Java、NSRegularExpression 和许多其他语言兼容。可以用 let regex &#x3D; try! Regex(“a[bc]+”) 或 let regex &#x3D; &#x2F;a[bc]+&#x2F; 写法来使用。<a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0350-regex-type-overview.md" >SE-0350 Regex Type and Overview<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 引入 Regex 类型。SE-0351 Regex builder DSL 使用 result builder 来构建正则表达式的 DSL。SE-0354 Regex Literals 简化的正则表达式。SE-0357 Regex-powered string processing algorithms 提案里有基于正则表达式的新字符串处理算法。</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://developer.apple.com/documentation/RegexBuilder" >RegexBuilder 文档<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>session <a class="link"   target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2022-110357" >Meet Swift Regex<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 、<a class="link"   target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2022-110358" >Swift Regex: Beyond the basics<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>Regex 示例代码如下：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 <span class="operator">=</span> <span class="string">&quot;I am not a good painter&quot;</span></span><br><span class="line"><span class="built_in">print</span>(s1.ranges(of: <span class="regexp">/good/</span>))</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> regGood <span class="operator">=</span> <span class="keyword">try</span> <span class="type">Regex</span>(<span class="string">&quot;[a-z]ood&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(s1.replacing(regGood, with: <span class="string">&quot;bad&quot;</span>))</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(s1.trimmingPrefix(<span class="regexp">/i am /</span>.ignoresCase()))</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg1 <span class="operator">=</span> <span class="regexp">/(.+?) read (\d+) books./</span></span><br><span class="line"><span class="keyword">let</span> reg2 <span class="operator">=</span> <span class="regexp">/(?&lt;name&gt;.+?) read (?&lt;books&gt;\d+) books./</span></span><br><span class="line"><span class="keyword">let</span> s2 <span class="operator">=</span> <span class="string">&quot;Jack read 3 books.&quot;</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> r1 <span class="operator">=</span> <span class="keyword">try</span> reg1.wholeMatch(in: s2) &#123;</span><br><span class="line">        <span class="built_in">print</span>(r1.<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(r1.<span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> r2 <span class="operator">=</span> <span class="keyword">try</span> reg2.wholeMatch(in: s2) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;name:&quot;</span> <span class="operator">+</span> r2.name)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;books:&quot;</span> <span class="operator">+</span> r2.books)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>使用 regex builders 的官方示例：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Text to parse:</span></span><br><span class="line"><span class="comment">// CREDIT  03/02/2022  Payroll from employer     $200.23</span></span><br><span class="line"><span class="comment">// CREDIT  03/03/2022  Suspect A           $2,000,000.00</span></span><br><span class="line"><span class="comment">// DEBIT   03/03/2022  Ted&#x27;s Pet Rock Sanctuary    $2,000,000.00</span></span><br><span class="line"><span class="comment">// DEBIT   03/05/2022  Doug&#x27;s Dugout Dogs      $33.27</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> RegexBuilder</span><br><span class="line"><span class="keyword">let</span> fieldSeparator <span class="operator">=</span> <span class="regexp">/\s&#123;2,&#125;|\t/</span></span><br><span class="line"><span class="keyword">let</span> transactionMatcher <span class="operator">=</span> <span class="type">Regex</span> &#123;</span><br><span class="line">  <span class="regexp">/CREDIT|DEBIT/</span></span><br><span class="line">  fieldSeparator</span><br><span class="line">  <span class="type">One</span>(.date(.numeric, locale: <span class="type">Locale</span>(identifier: <span class="string">&quot;en_US&quot;</span>), timeZone: .gmt)) <span class="comment">// 👈🏻 we define which data locale/timezone we want to use</span></span><br><span class="line">  fieldSeparator</span><br><span class="line">  <span class="type">OneOrMore</span> &#123;</span><br><span class="line">    <span class="type">NegativeLookahead</span> &#123; fieldSeparator &#125; <span class="comment">// 👈🏻 we stop as soon as we see one field separator</span></span><br><span class="line">    <span class="type">CharacterClass</span>.any</span><br><span class="line">  &#125;</span><br><span class="line">  fieldSeparator</span><br><span class="line">  <span class="type">One</span>(.localizedCurrency(code: <span class="string">&quot;USD&quot;</span>).locale(<span class="type">Locale</span>(identifier: <span class="string">&quot;en_US&quot;</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>在正则表达式中捕获数据，使用 Capture：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fieldSeparator <span class="operator">=</span> <span class="regexp">/\s&#123;2,&#125;|\t/</span></span><br><span class="line"><span class="keyword">let</span> transactionMatcher <span class="operator">=</span> <span class="type">Regex</span> &#123;</span><br><span class="line">  <span class="type">Capture</span> &#123; <span class="regexp">/CREDIT|DEBIT/</span> &#125; <span class="comment">// 👈🏻</span></span><br><span class="line">  fieldSeparator</span><br><span class="line"></span><br><span class="line">  <span class="type">Capture</span> &#123; <span class="type">One</span>(.date(.numeric, locale: <span class="type">Locale</span>(identifier: <span class="string">&quot;en_US&quot;</span>), timeZone: .gmt)) &#125; <span class="comment">// 👈🏻</span></span><br><span class="line">  fieldSeparator</span><br><span class="line"></span><br><span class="line">  <span class="type">Capture</span> &#123; <span class="comment">// 👈🏻</span></span><br><span class="line">    <span class="type">OneOrMore</span> &#123;</span><br><span class="line">      <span class="type">NegativeLookahead</span> &#123; fieldSeparator &#125;</span><br><span class="line">      <span class="type">CharacterClass</span>.any</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  fieldSeparator</span><br><span class="line">  <span class="type">Capture</span> &#123; <span class="type">One</span>(.localizedCurrency(code: <span class="string">&quot;USD&quot;</span>).locale(<span class="type">Locale</span>(identifier: <span class="string">&quot;en_US&quot;</span>))) &#125; <span class="comment">// 👈🏻</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// transactionMatcher: Regex&lt;(Substring, Substring, Date, Substring, Decimal)&gt;</span></span><br></pre></td></tr></table></figure></div>
<h2 id="基础类型"><a href="#基础类型" class="headerlink" title="基础类型"></a>基础类型</h2><h3 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h3><p>数字的类型有 Int、Float 和 Double</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Int</span></span><br><span class="line"><span class="keyword">let</span> i1 <span class="operator">=</span> <span class="number">100</span></span><br><span class="line"><span class="keyword">let</span> i2 <span class="operator">=</span> <span class="number">22</span></span><br><span class="line"><span class="built_in">print</span>(i1 <span class="operator">/</span> i2) <span class="comment">// 向下取整得 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Float</span></span><br><span class="line"><span class="keyword">let</span> f1: <span class="type">Float</span> <span class="operator">=</span> <span class="number">100.0</span></span><br><span class="line"><span class="keyword">let</span> f2: <span class="type">Float</span> <span class="operator">=</span> <span class="number">22.0</span></span><br><span class="line"><span class="built_in">print</span>(f1 <span class="operator">/</span> f2) <span class="comment">// 4.5454545</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f3: <span class="type">Float16</span> <span class="operator">=</span> <span class="number">5.0</span> <span class="comment">// macOS 还不能用</span></span><br><span class="line"><span class="keyword">let</span> f4: <span class="type">Float32</span> <span class="operator">=</span> <span class="number">5.0</span></span><br><span class="line"><span class="keyword">let</span> f5: <span class="type">Float64</span> <span class="operator">=</span> <span class="number">5.0</span></span><br><span class="line"><span class="keyword">let</span> f6: <span class="type">Float80</span> <span class="operator">=</span> <span class="number">5.0</span></span><br><span class="line"><span class="built_in">print</span>(f4, f5, f6) <span class="comment">// 5.0 5.0 5.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Double</span></span><br><span class="line"><span class="keyword">let</span> d1: <span class="type">Double</span> <span class="operator">=</span> <span class="number">100.0</span></span><br><span class="line"><span class="keyword">let</span> d2: <span class="type">Double</span> <span class="operator">=</span> <span class="number">22.0</span></span><br><span class="line"><span class="built_in">print</span>(d1 <span class="operator">/</span> d2) <span class="comment">// 4.545454545454546</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字面量</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Int</span>(<span class="number">0b10101</span>)) <span class="comment">// 0b 开头是二进制 </span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Int</span>(<span class="number">0x00afff</span>)) <span class="comment">// 0x 开头是十六进制</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2.5e4</span>) <span class="comment">// 2.5x10^4 十进制用 e</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">0xAp2</span>) <span class="comment">// 10*2^2  十六进制用 p</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2_000_000</span>) <span class="comment">// 2000000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// isMultiple(of:) 方法检查一个数字是否是另一个数字的倍数</span></span><br><span class="line"><span class="keyword">let</span> i3 <span class="operator">=</span> <span class="number">36</span></span><br><span class="line"><span class="built_in">print</span>(i3.isMultiple(of: <span class="number">9</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div>
<p>处理数字有 floor、ceil、round。floor 是向下取整，只取整数部分；cell 是向上取整，只要有不为零的小数，整数就加1;round 是四舍五入。</p>
<h3 id="布尔数"><a href="#布尔数" class="headerlink" title="布尔数"></a>布尔数</h3><p>布尔数有 true 和 false 两种值，还有一个能够切换这两个值的 toggle 方法。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">b.toggle() <span class="comment">// true</span></span><br><span class="line">b.toggle() <span class="comment">// false</span></span><br></pre></td></tr></table></figure></div>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 <span class="operator">=</span> <span class="string">&quot;Hi! This is a string. Cool?&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/// 转义符 \n 表示换行。</span></span><br><span class="line"><span class="comment">/// 其它转义字符有 \0 空字符)、\t 水平制表符 、\n 换行符、\r 回车符</span></span><br><span class="line"><span class="keyword">let</span> s2 <span class="operator">=</span> <span class="string">&quot;Hi!<span class="subst">\n</span>This is a string. Cool?&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多行</span></span><br><span class="line"><span class="keyword">let</span> s3 <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Hi!</span></span><br><span class="line"><span class="string">This is a string.</span></span><br><span class="line"><span class="string">Cool?</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 长度</span></span><br><span class="line"><span class="built_in">print</span>(s3.count)</span><br><span class="line"><span class="built_in">print</span>(s3.isEmpty)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拼接</span></span><br><span class="line"><span class="built_in">print</span>(s3 <span class="operator">+</span> <span class="string">&quot;<span class="subst">\n</span>Sure!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串中插入变量</span></span><br><span class="line"><span class="keyword">let</span> i <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Today is good day, double <span class="subst">\(i)</span><span class="subst">\(i)</span>!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 遍历字符串</span></span><br><span class="line"><span class="comment">/// 输出：</span></span><br><span class="line"><span class="comment">/// o</span></span><br><span class="line"><span class="comment">/// n</span></span><br><span class="line"><span class="comment">/// e</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">&quot;one&quot;</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找</span></span><br><span class="line"><span class="built_in">print</span>(s3.lowercased().contains(<span class="string">&quot;cool&quot;</span>)) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换</span></span><br><span class="line"><span class="keyword">let</span> s4 <span class="operator">=</span> <span class="string">&quot;one is two&quot;</span></span><br><span class="line"><span class="keyword">let</span> newS4 <span class="operator">=</span> s4.replacingOccurrences(of: <span class="string">&quot;two&quot;</span>, with: <span class="string">&quot;one&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(newS4)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除空格和换行</span></span><br><span class="line"><span class="keyword">let</span> s5 <span class="operator">=</span> <span class="string">&quot; Simple line. <span class="subst">\n</span><span class="subst">\n</span>  &quot;</span></span><br><span class="line"><span class="built_in">print</span>(s5.trimmingCharacters(in: .whitespacesAndNewlines))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切割成数组</span></span><br><span class="line"><span class="keyword">let</span> s6 <span class="operator">=</span> <span class="string">&quot;one/two/three&quot;</span></span><br><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> s6.components(separatedBy: <span class="string">&quot;/&quot;</span>) <span class="comment">// 继承自 NSString 的接口</span></span><br><span class="line"><span class="built_in">print</span>(a1) <span class="comment">// [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> s6.split(separator: <span class="string">&quot;/&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a2) <span class="comment">// [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;] 属于切片，性能较 components 更好</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否是某种类型</span></span><br><span class="line"><span class="keyword">let</span> c1: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;🤔&quot;</span></span><br><span class="line"><span class="built_in">print</span>(c1.isASCII) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(c1.isSymbol) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">print</span>(c1.isLetter) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(c1.isNumber) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(c1.isUppercase) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串和 Data 互转</span></span><br><span class="line"><span class="keyword">let</span> data <span class="operator">=</span> <span class="type">Data</span>(<span class="string">&quot;hi&quot;</span>.utf8)</span><br><span class="line"><span class="keyword">let</span> s7 <span class="operator">=</span> <span class="type">String</span>(decoding: data, as: <span class="type">UTF8</span>.<span class="keyword">self</span>)</span><br><span class="line"><span class="built_in">print</span>(s7) <span class="comment">// hi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串可以当作集合来用。</span></span><br><span class="line"><span class="keyword">let</span> revered <span class="operator">=</span> s7.reversed()</span><br><span class="line"><span class="built_in">print</span>(<span class="type">String</span>(revered))</span><br></pre></td></tr></table></figure></div>
<p>Unicode、Character 和 SubString 等内容参见官方字符串文档：<a class="link"   target="_blank" rel="noopener" href="https://docs.swift.org/swift-book/LanguageGuide/StringsAndCharacters.html" >Strings and Characters — The Swift Programming Language (Swift 5.1)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>字符串字面符号可以参看《<a class="link"   target="_blank" rel="noopener" href="https://www.swiftbysundell.com/articles/string-literals-in-swift/" >String literals in Swift<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>》。</p>
<p>原始字符串</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原始字符串在字符串前加上一个或多个#符号。里面的双引号和转义符号将不再起作用了，如果想让转义符起作用，需要在转义符后面加上#符号。</span></span><br><span class="line"><span class="keyword">let</span> s8 <span class="operator">=</span> <span class="string">#&quot;\(s7)<span class="subst">\#(s7)</span> &quot;one&quot; and &quot;two&quot;\n. <span class="subst">\#n</span>The second line.&quot;#</span></span><br><span class="line"><span class="built_in">print</span>(s8)</span><br><span class="line"><span class="comment">/// \(s7)hi &quot;one&quot; and &quot;two&quot;\n.</span></span><br><span class="line"><span class="comment">/// The second line.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 原始字符串在正则使用效果更佳，反斜杠更少了。</span></span><br><span class="line"><span class="keyword">let</span> s9 <span class="operator">=</span> <span class="string">&quot;<span class="subst">\\</span><span class="subst">\\</span>[A-Z]+[A-Za-z]+<span class="subst">\\</span>.[a-z]+&quot;</span></span><br><span class="line"><span class="keyword">let</span> s10 <span class="operator">=</span> <span class="string">#&quot;\\[A-Z]+[A-Za-z]+\.[a-z]+&quot;#</span></span><br><span class="line"><span class="built_in">print</span>(s9) <span class="comment">// \\[A-Z]+[A-Za-z]+\.[a-z]+</span></span><br><span class="line"><span class="built_in">print</span>(s10) <span class="comment">// \\[A-Z]+[A-Za-z]+\.[a-z]+</span></span><br></pre></td></tr></table></figure></div>
<p>Swift5.7 String Index 大升级 <a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0180-string-index-overhaul.md" >String Index Overhaul<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h3><p>Swift的枚举有类的一些特性，比如计算属性、实例方法、扩展、遵循协议等等。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">E1</span>:<span class="title class_ inherited__">String</span>, <span class="title class_ inherited__">CaseIterable</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> e1, e2 <span class="operator">=</span> <span class="string">&quot;12&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关联值</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">E2</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> e1([<span class="type">String</span>])</span><br><span class="line">    <span class="keyword">case</span> e2(<span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> e1 <span class="operator">=</span> <span class="type">E2</span>.e1([<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>])</span><br><span class="line"><span class="keyword">let</span> e2 <span class="operator">=</span> <span class="type">E2</span>.e2(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> e1 &#123;</span><br><span class="line"><span class="keyword">case</span> .e1(<span class="keyword">let</span> array):</span><br><span class="line">    <span class="built_in">print</span>(array)</span><br><span class="line"><span class="keyword">case</span> .e2(<span class="keyword">let</span> int):</span><br><span class="line">    <span class="built_in">print</span>(int)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(e2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原始值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">E1</span>.e1.rawValue)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遵循 CaseIterable 协议可迭代</span></span><br><span class="line"><span class="keyword">for</span> ie <span class="keyword">in</span> <span class="type">E1</span>.allCases &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;show <span class="subst">\(ie)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归枚举</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">RE</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> v(<span class="type">String</span>)</span><br><span class="line">    <span class="keyword">indirect</span> <span class="keyword">case</span> node(l:<span class="type">RE</span>, r:<span class="type">RE</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lNode <span class="operator">=</span> <span class="type">RE</span>.v(<span class="string">&quot;left&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> rNode <span class="operator">=</span> <span class="type">RE</span>.v(<span class="string">&quot;right&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> pNode <span class="operator">=</span> <span class="type">RE</span>.node(l: lNode, r: rNode)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> pNode &#123;</span><br><span class="line"><span class="keyword">case</span> .v(<span class="keyword">let</span> string):</span><br><span class="line">    <span class="built_in">print</span>(string)</span><br><span class="line"><span class="keyword">case</span> .node(<span class="keyword">let</span> l, <span class="keyword">let</span> r):</span><br><span class="line">    <span class="built_in">print</span>(l,r)</span><br><span class="line">    <span class="keyword">switch</span> l &#123;</span><br><span class="line">    <span class="keyword">case</span> .v(<span class="keyword">let</span> string):</span><br><span class="line">        <span class="built_in">print</span>(string)</span><br><span class="line">    <span class="keyword">case</span> .node(<span class="keyword">let</span> l, <span class="keyword">let</span> r):</span><br><span class="line">        <span class="built_in">print</span>(l, r)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> r &#123;</span><br><span class="line">    <span class="keyword">case</span> .v(<span class="keyword">let</span> string):</span><br><span class="line">        <span class="built_in">print</span>(string)</span><br><span class="line">    <span class="keyword">case</span> .node(<span class="keyword">let</span> l, <span class="keyword">let</span> r):</span><br><span class="line">        <span class="built_in">print</span>(l, r)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>@unknown 用来区分固定的枚举和可能改变的枚举的能力。@unknown 用于防止未来新增枚举属性会进行提醒提示完善每个 case 的处理。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @unknown</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">E3</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> e1, e2, e3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">fe1</span>(<span class="params">e</span>: <span class="type">E3</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> e &#123;</span><br><span class="line">    <span class="keyword">case</span> .e1:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;e1 ok&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> .e2:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;e2 ok&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> .e3:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;e3 ok&quot;</span>)</span><br><span class="line">    <span class="keyword">@unknown</span> <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;not ok&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>符合 Comparable 协议的枚举可以进行比较。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Comparable 枚举比较</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">E4</span>: <span class="title class_ inherited__">Comparable</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> e1, e2</span><br><span class="line">    <span class="keyword">case</span> e3(i: <span class="type">Int</span>)</span><br><span class="line">    <span class="keyword">case</span> e4</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> e3 <span class="operator">=</span> <span class="type">E4</span>.e4</span><br><span class="line"><span class="keyword">let</span> e4 <span class="operator">=</span> <span class="type">E4</span>.e3(i: <span class="number">3</span>)</span><br><span class="line"><span class="keyword">let</span> e5 <span class="operator">=</span> <span class="type">E4</span>.e3(i: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">let</span> e6 <span class="operator">=</span> <span class="type">E4</span>.e1</span><br><span class="line"><span class="built_in">print</span>(e3 <span class="operator">&gt;</span> e4) <span class="comment">// true</span></span><br><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> [e3, e4, e5, e6]</span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> a1.sorted()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a2 &#123;</span><br><span class="line">    <span class="built_in">print</span>(i.<span class="keyword">self</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/// e1</span></span><br><span class="line"><span class="comment">/// e3(i: 2)</span></span><br><span class="line"><span class="comment">/// e3(i: 3)</span></span><br><span class="line"><span class="comment">/// e4</span></span><br></pre></td></tr></table></figure></div>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><p>元组里的值类型可以是不同的。元组可以看成是匿名的结构体。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> t1 <span class="operator">=</span> (p1: <span class="number">1</span>, p2: <span class="string">&quot;two&quot;</span>, p3: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(t1.p1)</span><br><span class="line"><span class="built_in">print</span>(t1.p3)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型推导</span></span><br><span class="line"><span class="keyword">let</span> t2 <span class="operator">=</span> (<span class="number">1</span>, <span class="string">&quot;two&quot;</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过下标访问</span></span><br><span class="line"><span class="built_in">print</span>(t2.<span class="number">1</span>) <span class="comment">// two</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 分解元组</span></span><br><span class="line"><span class="keyword">let</span> (dp1, dp2, <span class="keyword">_</span>) <span class="operator">=</span> t2</span><br><span class="line"><span class="built_in">print</span>(dp1)</span><br><span class="line"><span class="built_in">print</span>(dp2)</span><br></pre></td></tr></table></figure></div>
<h3 id="泛型和协议"><a href="#泛型和协议" class="headerlink" title="泛型和协议"></a>泛型和协议</h3><p>泛型可以减少重复代码，是一种抽象的表达方式。where 关键字可以对泛型做约束。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">fn</span>&lt;<span class="type">T</span>&gt;(<span class="params">p</span>: <span class="type">T</span>) -&gt; [<span class="type">T</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> r <span class="operator">=</span> [<span class="type">T</span>]()</span><br><span class="line">    r.append(p)</span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(fn(p: <span class="string">&quot;one&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S1</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> arr <span class="operator">=</span> [<span class="type">T</span>]()</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">add</span>(<span class="keyword">_</span> <span class="params">p</span>: <span class="type">T</span>) &#123;</span><br><span class="line">        arr.append(p)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s1 <span class="operator">=</span> <span class="type">S1</span>(arr: [<span class="string">&quot;zero&quot;</span>])</span><br><span class="line">s1.add(<span class="string">&quot;one&quot;</span>)</span><br><span class="line">s1.add(<span class="string">&quot;two&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s1.arr) <span class="comment">// [&quot;zero&quot;, &quot;one&quot;, &quot;two&quot;]</span></span><br></pre></td></tr></table></figure></div>
<p>关联类型</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">pc</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">T</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">add</span>(<span class="keyword">_</span> <span class="params">p</span>: <span class="type">T</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S2</span>: pc &#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">T</span> <span class="operator">=</span> <span class="type">String</span> <span class="comment">// 类型推导，可省略</span></span><br><span class="line">    <span class="keyword">var</span> strs <span class="operator">=</span> [<span class="type">String</span>]()</span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">add</span>(<span class="keyword">_</span> <span class="params">p</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        strs.append(p)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>泛型适用于嵌套类型</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S3</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">S4</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> p: <span class="type">T</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> p1: <span class="type">T</span></span><br><span class="line">    <span class="keyword">var</span> p2: <span class="type">S4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s2 <span class="operator">=</span> <span class="type">S3</span>(p1: <span class="number">1</span>, p2: <span class="type">S3</span>.<span class="type">S4</span>(p: <span class="number">3</span>))</span><br><span class="line"><span class="keyword">let</span> s3 <span class="operator">=</span> <span class="type">S3</span>(p1: <span class="string">&quot;one&quot;</span>, p2: <span class="type">S3</span>.<span class="type">S4</span>(p: <span class="string">&quot;three&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(s2,s3)</span><br></pre></td></tr></table></figure></div>
<p>session <a class="link"   target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2022/110352/" >Embrace Swift generics<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 、<a class="link"   target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2022-110353" >Design protocol interfaces in Swift<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>swift 5.6 和之前编写泛型接口如下：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">feed</span>&lt;<span class="type">A</span>&gt;(<span class="keyword">_</span> <span class="params">animal</span>: <span class="type">A</span>) <span class="keyword">where</span> <span class="type">A</span>: <span class="type">Animal</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 👆🏻👇🏻 Equivalents</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">feed</span>&lt;<span class="type">A</span>: <span class="type">Animal</span>&gt;(<span class="keyword">_</span> <span class="params">animal</span>: <span class="type">A</span>)</span><br></pre></td></tr></table></figure></div>
<p>swift 5.7 可以这样写：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">feed</span>(<span class="keyword">_</span> <span class="params">animal</span>: <span class="keyword">some</span> <span class="type">Animal</span>)</span><br></pre></td></tr></table></figure></div>
<p>some 关键字可以用于参数和结构类型。some 会保证类型关系，而 any 会持有任意具体类型，删除类型关系。</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0347-type-inference-from-default-exprs.md" >SE-0347 Type inference from default expressions<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 扩展 Swift 泛型参数类型的默认值能力。如下代码示例：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">suffledArray</span>&lt;<span class="type">T</span>: <span class="type">Sequence</span>&gt;(<span class="params">from</span> <span class="params">options</span>: <span class="type">T</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">...</span><span class="number">100</span>) -&gt; [<span class="type">T</span>.<span class="type">Element</span>] &#123;</span><br><span class="line">    <span class="type">Array</span>(options.shuffled())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(suffledArray())</span><br><span class="line"><span class="built_in">print</span>(suffledArray(from: [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>]))</span><br></pre></td></tr></table></figure></div>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0341-opaque-parameters.md" >SE-0341 Opaque Parameter Declarations<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 使用 some 参数简化泛型参数声明。<a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0328-structural-opaque-result-types.md" >SE-0328 Structural opaque result types<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 扩大不透明结果返回类型可以使用的范围。<a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0360-opaque-result-types-with-availability.md" >SE-0360 Opaque result types with limited availability<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 可用性有限的不透明结果类型，比如 if #available(macOS 13.0, *) {} 就可以根据系统不同版本返回不同类型，新版本出现新类型的 View 就可以和以前的 View 类型区别开。</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0309-unlock-existential-types-for-all-protocols.md" >SE-0309 Unlock existentials for all protocols<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 改进了 existentials 和 泛型的交互。这样就可以更方便的检查 Any 类型的两个值是否相等</p>
<p>any 关键字充当的是类型擦除的助手，是通过告知编译器你使用 existential 作为类型，此语法可兼容以前系统。</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0346-light-weight-same-type-syntax.md" >SE-0346 Lightweight same-type requirements for primary associated types<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 引入一种新语法，用于符合泛型参数并通过相同类型要求约束关联类型。<a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0358-primary-associated-types-in-stdlib.md" >SE-0358 Primary Associated Types in the Standard Library<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 引入主要关联类型概念，并将其带入了标准库。这些关联类型很像泛型，允许开发者将给定关联类型的类型指定为通用约束。</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0353-constrained-existential-types.md" >SE-0353 Constrained Existential Types<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 基于 SE-0309 和 SE-0346 提案，在 existential 类型的上下文中重用轻量关联类型的约束。</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/apple/swift-evolution/blob/main/proposals/0352-implicit-open-existentials.md" >SE-0352 Implicitly Opened Existentials<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 允许 Swift 在很多情况下使用协议调用泛型函数。</p>
<p>Swift 论坛上一个对 any 和 some 关键字语法使用场景的讨论，<a class="link"   target="_blank" rel="noopener" href="https://forums.swift.org/t/do-any-and-some-help-with-protocol-oriented-testing-at-all/58113" >Do any and some help with “Protocol Oriented Testing” at all?<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 。</p>
<h3 id="不透明类型"><a href="#不透明类型" class="headerlink" title="不透明类型"></a>不透明类型</h3><p>不透明类型会隐藏类型，让使用者更关注功能。不透明类型和协议很类似，不同的是不透明比协议限定的要多，协议能够对应更多类型。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">P</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">f</span>() -&gt; <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S1</span>: <span class="title class_ inherited__">P</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">f</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;one<span class="subst">\n</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S2</span>&lt;<span class="type">T</span>: <span class="type">P</span>&gt;: <span class="title class_ inherited__">P</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p: <span class="type">T</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">f</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> p.f() <span class="operator">+</span> <span class="string">&quot;two<span class="subst">\n</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S3</span>&lt;<span class="type">T1</span>: <span class="type">P</span>, <span class="type">T2</span>: <span class="type">P</span>&gt;: <span class="title class_ inherited__">P</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p1: <span class="type">T1</span></span><br><span class="line">    <span class="keyword">var</span> p2: <span class="type">T2</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">f</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> p1.f() <span class="operator">+</span> p2.f() <span class="operator">+</span> <span class="string">&quot;three<span class="subst">\n</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">someP</span>() -&gt; <span class="keyword">some</span> <span class="type">P</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">S3</span>(p1: <span class="type">S1</span>(), p2: <span class="type">S2</span>(p: <span class="type">S1</span>()))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r <span class="operator">=</span> someP()</span><br><span class="line"><span class="built_in">print</span>(r.f())</span><br></pre></td></tr></table></figure></div>
<p>函数调用者决定返回什么类型是泛型，函数自身决定返回什么类型使用不透明返回类型。</p>
<h3 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h3><p>Result 类型用来处理错误，特别适用异步接口的错误处理。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">URLSession</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">dataTaskWithResult</span>(</span><br><span class="line">        <span class="params">with</span> <span class="params">url</span>: <span class="type">URL</span>,</span><br><span class="line">        <span class="params">handler</span>: <span class="keyword">@escaping</span> (<span class="type">Result</span>&lt;<span class="type">Data</span>, <span class="type">Error</span>&gt;) -&gt; <span class="type">Void</span></span><br><span class="line">    ) -&gt; <span class="type">URLSessionDataTask</span> &#123;</span><br><span class="line">        dataTask(with: url) &#123; data, <span class="keyword">_</span>, err <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> err <span class="operator">=</span> err &#123;</span><br><span class="line">                handler(.failure(err))</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                handler(.success(data <span class="operator">??</span> <span class="type">Data</span>()))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> url <span class="operator">=</span> <span class="type">URL</span>(string: <span class="string">&quot;https://ming1016.github.io/&quot;</span>)<span class="operator">!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以前网络请求</span></span><br><span class="line"><span class="keyword">let</span> t1 <span class="operator">=</span> <span class="type">URLSession</span>.shared.dataTask(with: url) &#123;</span><br><span class="line">    data, <span class="keyword">_</span>, error <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> err <span class="operator">=</span> error &#123;</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> data <span class="operator">=</span> data &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="type">String</span>(decoding: data, as: <span class="type">UTF8</span>.<span class="keyword">self</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">t1.resume()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 Result 网络请求</span></span><br><span class="line"><span class="keyword">let</span> t2 <span class="operator">=</span> <span class="type">URLSession</span>.shared.dataTaskWithResult(with: url) &#123; result <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">switch</span> result &#123;</span><br><span class="line">    <span class="keyword">case</span> .success(<span class="keyword">let</span> data):</span><br><span class="line">        <span class="built_in">print</span>(<span class="type">String</span>(decoding: data, as: <span class="type">UTF8</span>.<span class="keyword">self</span>))</span><br><span class="line">    <span class="keyword">case</span> .failure(<span class="keyword">let</span> err):</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">t2.resume()</span><br></pre></td></tr></table></figure></div>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>使用 is 关键字进行类型判断， 使用as 关键字来转换成子类。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">S0</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">S1</span>: <span class="title class_ inherited__">S0</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">S2</span>: <span class="title class_ inherited__">S0</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> [<span class="type">S0</span>]()</span><br><span class="line">a.append(<span class="type">S1</span>())</span><br><span class="line">a.append(<span class="type">S2</span>())</span><br><span class="line"><span class="keyword">for</span> e <span class="keyword">in</span> a &#123;</span><br><span class="line">    <span class="comment">// 类型判断</span></span><br><span class="line">    <span class="keyword">if</span> e <span class="keyword">is</span> <span class="type">S1</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Type is S1&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> e <span class="keyword">is</span> <span class="type">S2</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Type is S2&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 使用 as 关键字转换成子类</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> s1 <span class="operator">=</span> e <span class="keyword">as?</span> <span class="type">S1</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;As S1 <span class="subst">\(s1)</span>&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> s2 <span class="operator">=</span> e <span class="keyword">as?</span> <span class="type">S2</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;As S2 <span class="subst">\(s2)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="类和结构体"><a href="#类和结构体" class="headerlink" title="类和结构体"></a>类和结构体</h2><h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><p>类可以定义属性、方法、构造器、下标操作。类使用扩展来扩展功能，遵循协议。类还以继承，运行时检查实例类型。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">p</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.p <span class="operator">=</span> p</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 下标操作</span></span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">s</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> p <span class="operator">+</span> s</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            p <span class="operator">=</span> s <span class="operator">+</span> newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c <span class="operator">=</span> <span class="type">C</span>(<span class="string">&quot;hi&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(c.p)</span><br><span class="line"><span class="built_in">print</span>(c[<span class="string">&quot; ming&quot;</span>])</span><br><span class="line">c[<span class="string">&quot;k&quot;</span>] <span class="operator">=</span> <span class="string">&quot;v&quot;</span></span><br><span class="line"><span class="built_in">print</span>(c.p)</span><br></pre></td></tr></table></figure></div>
<h3 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h3><p> 结构体是值类型，可以定义属性、方法、构造器、下标操作。结构体使用扩展来扩展功能，遵循协议。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p1: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> p2: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">f</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> p1 <span class="operator">+</span> <span class="type">String</span>(p2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s <span class="operator">=</span> <span class="type">S</span>(p2: <span class="number">1</span>)</span><br><span class="line">s.p1 <span class="operator">=</span> <span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="built_in">print</span>(s.f()) <span class="comment">// 11</span></span><br></pre></td></tr></table></figure></div>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>类、结构体或枚举里的变量常量就是他们的属性。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> sp <span class="operator">=</span> <span class="string">&quot;类型属性&quot;</span> <span class="comment">// 类型属性通过类型本身访问，非实例访问</span></span><br><span class="line">    <span class="keyword">var</span> p1: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> p2: <span class="type">Int</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    <span class="comment">// cp 是计算属性</span></span><br><span class="line">    <span class="keyword">var</span> cp: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> p2 <span class="operator">*</span> <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            p2 <span class="operator">=</span> newValue <span class="operator">+</span> <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 只有 getter 的是只读计算属性</span></span><br><span class="line">    <span class="keyword">var</span> rcp: <span class="type">Int</span> &#123;</span><br><span class="line">        p2 <span class="operator">*</span> <span class="number">4</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="type">S</span>.sp)</span><br><span class="line"><span class="built_in">print</span>(<span class="type">S</span>().cp) <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">var</span> s <span class="operator">=</span> <span class="type">S</span>()</span><br><span class="line">s.cp <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(s.p2) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">S</span>().rcp) <span class="comment">// 4</span></span><br></pre></td></tr></table></figure></div>
<p>willSet 和 didSet 是属性观察器，可以在属性值设置前后插入自己的逻辑处理。</p>
<p>键路径表达式作为函数</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S2</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> p1: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> p2: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s2 <span class="operator">=</span> <span class="type">S2</span>(p1: <span class="string">&quot;one&quot;</span>, p2: <span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> s3 <span class="operator">=</span> <span class="type">S2</span>(p1: <span class="string">&quot;two&quot;</span>, p2: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> [s2, s3]</span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> a1.map(\.p1)</span><br><span class="line"><span class="built_in">print</span>(a2) <span class="comment">// [&quot;one&quot;, &quot;two&quot;]</span></span><br></pre></td></tr></table></figure></div>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">E</span>: <span class="title class_ inherited__">String</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> one, two, three</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">showRawValue</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(rawValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> e <span class="operator">=</span> <span class="type">E</span>.three</span><br><span class="line">e.showRawValue() <span class="comment">// three</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可变的实例方法，使用 mutating 标记</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p: <span class="type">String</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">addFullStopForP</span>() &#123;</span><br><span class="line">        p <span class="operator">+=</span> <span class="string">&quot;.&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s <span class="operator">=</span> <span class="type">S</span>(p: <span class="string">&quot;hi&quot;</span>)</span><br><span class="line">s.addFullStopForP()</span><br><span class="line"><span class="built_in">print</span>(s.p)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="keyword">func</span> <span class="title function_">cf</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;类方法&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>static和class关键字修饰的方法类似 OC 的类方法。static 可以修饰存储属性，而 class 不能；class 修饰的方法可以继承，而 static 不能。在协议中需用 static 来修饰。</p>
<p>静态下标方法</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 静态下标</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S2</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> sp <span class="operator">=</span> [<span class="type">String</span>: <span class="type">Int</span>]()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">subscript</span>(<span class="keyword">_</span> <span class="params">s</span>: <span class="type">String</span>, <span class="params">d</span>: <span class="type">Int</span> <span class="operator">=</span> <span class="number">10</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> sp[s] <span class="operator">??</span> d</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            sp[s] <span class="operator">=</span> newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">S2</span>[<span class="string">&quot;key1&quot;</span>] <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="type">S2</span>[<span class="string">&quot;key2&quot;</span>] <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">S2</span>[<span class="string">&quot;key2&quot;</span>]) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">S2</span>[<span class="string">&quot;key3&quot;</span>]) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure></div>
<p>自定义类型中实现了 callAsFunction() 的话，该类型的值就可以直接调用。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// callAsFunction()</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S3</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p1: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">callAsFunction</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;show <span class="subst">\(p1)</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> s2 <span class="operator">=</span> <span class="type">S3</span>(p1: <span class="string">&quot;hi&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s2()) <span class="comment">// show hi</span></span><br></pre></td></tr></table></figure></div>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>类能继承另一个类，继承它的方法、属性等。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C1</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p1: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> cp1: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> p1 <span class="operator">+</span> <span class="string">&quot; like ATM&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            p1 <span class="operator">=</span> p1 <span class="operator">+</span> newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">init</span>(<span class="params">p1</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.p1 <span class="operator">=</span> p1</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">sayHi</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Hi! <span class="subst">\(p1)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C2</span>: <span class="title class_ inherited__">C1</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p2: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">p2</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.p2 <span class="operator">=</span> p2</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(p1: p2 <span class="operator">+</span> <span class="string">&quot;&#x27;s father&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">C2</span>(p2: <span class="string">&quot;Lemon&quot;</span>).sayHi() <span class="comment">// Hi! Lemon&#x27;s father</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重写父类方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C3</span>: <span class="title class_ inherited__">C2</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">sayHi</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Hi! <span class="subst">\(p2)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">C3</span>(p2: <span class="string">&quot;Lemon&quot;</span>).sayHi() <span class="comment">// Hi! Lemon</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重写计算属性</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C4</span>: <span class="title class_ inherited__">C1</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> cp1: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> p1 <span class="operator">+</span> <span class="string">&quot; like Out of the blade&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            p1 <span class="operator">=</span> p1 <span class="operator">+</span> newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">C1</span>(p1: <span class="string">&quot;Lemon&quot;</span>).cp1) <span class="comment">// Lemon like ATM</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">C4</span>(p1: <span class="string">&quot;Lemon&quot;</span>).cp1) <span class="comment">// Lemon like Out of the blade</span></span><br></pre></td></tr></table></figure></div>
<p>通过 final 关键字可以防止类被继承，final 还可以用于属性和方法。使用 super 关键字指代父类。</p>
<h2 id="函数式"><a href="#函数式" class="headerlink" title="函数式"></a>函数式</h2><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>map 可以依次处理数组中元素，并返回一个处理后的新数组。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> a1.map &#123;</span><br><span class="line">    <span class="string">&quot;<span class="subst">\(<span class="variable">$0</span>)</span>2&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(a2) <span class="comment">// [&quot;a2&quot;, &quot;b2&quot;, &quot;c2&quot;]</span></span><br></pre></td></tr></table></figure></div>
<p>使用 compactMap 可以过滤 nil 的元素。flatMap 会将多个数组合成一个数组返回。</p>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>根据指定条件返回</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;call my name&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> a1.filter &#123;</span><br><span class="line">    <span class="variable">$0</span>.prefix(<span class="number">1</span>) <span class="operator">==</span> <span class="string">&quot;c&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(a2) <span class="comment">// [&quot;c&quot;, &quot;call my name&quot;]</span></span><br></pre></td></tr></table></figure></div>
<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><p>reduce 可以将迭代中返回的结果用于下个迭代中，并，还能让你设个初始值。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;call my name.&quot;</span>, <span class="string">&quot;get it?&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> a1.reduce(<span class="string">&quot;Hey u,&quot;</span>, &#123; partialResult, s <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// partialResult 是前面返回的值，s 是遍历到当前的值</span></span><br><span class="line">    partialResult <span class="operator">+</span> <span class="string">&quot; <span class="subst">\(s)</span>&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a2) <span class="comment">// Hey u, a b c call my name. get it?</span></span><br></pre></td></tr></table></figure></div>
<h3 id="sorted"><a href="#sorted" class="headerlink" title="sorted"></a>sorted</h3><p>排序</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类型遵循 Comparable</span></span><br><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;call my name.&quot;</span>, <span class="string">&quot;get it?&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> a1.sorted()</span><br><span class="line"><span class="keyword">let</span> a3 <span class="operator">=</span> a1.sorted(by: <span class="operator">&gt;</span>)</span><br><span class="line"><span class="keyword">let</span> a4 <span class="operator">=</span> a1.sorted(by: <span class="operator">&lt;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a2) <span class="comment">// Hey u, a b c call my name. get it?</span></span><br><span class="line"><span class="built_in">print</span>(a3) <span class="comment">// [&quot;get it?&quot;, &quot;call my name.&quot;, &quot;c&quot;, &quot;b&quot;, &quot;a&quot;]</span></span><br><span class="line"><span class="built_in">print</span>(a4) <span class="comment">// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;call my name.&quot;, &quot;get it?&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型不遵循 Comparable</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> s: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> i: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a5 <span class="operator">=</span> [<span class="type">S</span>(s: <span class="string">&quot;a&quot;</span>, i: <span class="number">0</span>), <span class="type">S</span>(s: <span class="string">&quot;b&quot;</span>, i: <span class="number">1</span>), <span class="type">S</span>(s: <span class="string">&quot;c&quot;</span>, i: <span class="number">2</span>)]</span><br><span class="line"><span class="keyword">let</span> a6 <span class="operator">=</span> a5</span><br><span class="line">    .sorted &#123; l, r <span class="keyword">in</span></span><br><span class="line">        l.i <span class="operator">&gt;</span> r.i</span><br><span class="line">    &#125;</span><br><span class="line">    .map &#123;</span><br><span class="line">        <span class="variable">$0</span>.i</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a6) <span class="comment">// [2, 1, 0]</span></span><br></pre></td></tr></table></figure></div>
<h2 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h2><h3 id="If"><a href="#If" class="headerlink" title="If"></a>If</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if</span></span><br><span class="line"><span class="keyword">let</span> s <span class="operator">=</span> <span class="string">&quot;hi&quot;</span></span><br><span class="line"><span class="keyword">if</span> s.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;String is Empty&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;String is <span class="subst">\(s)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 三元条件</span></span><br><span class="line">s.isEmpty <span class="operator">?</span> <span class="built_in">print</span>(<span class="string">&quot;String is Empty again&quot;</span>) : <span class="built_in">print</span>(<span class="string">&quot;String is <span class="subst">\(s)</span> again&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// if let-else</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f</span>(<span class="params">s</span>: <span class="type">String</span>?) &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> s1 <span class="operator">=</span> s &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;s1 is <span class="subst">\(s1)</span>&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;s1 is nothing&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// nil-coalescing</span></span><br><span class="line">    <span class="keyword">let</span> s2 <span class="operator">=</span> s <span class="operator">??</span> <span class="string">&quot;nothing&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;s2 is <span class="subst">\(s2)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">f(s: <span class="string">&quot;something&quot;</span>)</span><br><span class="line">f(s: <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// if case let</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">E</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> c1(<span class="type">String</span>)</span><br><span class="line">    <span class="keyword">case</span> c2([<span class="type">String</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">des</span>() &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .c1(<span class="keyword">let</span> string):</span><br><span class="line">            <span class="built_in">print</span>(string)</span><br><span class="line">        <span class="keyword">case</span> .c2(<span class="keyword">let</span> array):</span><br><span class="line">            <span class="built_in">print</span>(array)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">E</span>.c1(<span class="string">&quot;enum c1&quot;</span>).des()</span><br><span class="line"><span class="type">E</span>.c2([<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>]).des()</span><br></pre></td></tr></table></figure></div>
<h3 id="Guard"><a href="#Guard" class="headerlink" title="Guard"></a>Guard</h3><p>更好地处理异常情况</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// guard</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f1</span>(<span class="params">p</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> p.isEmpty <span class="operator">!=</span> <span class="literal">true</span> <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Empty string.&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;String <span class="subst">\(p)</span> is not empty.&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f1(p: <span class="string">&quot;&quot;</span>)) <span class="comment">// Empty string.</span></span><br><span class="line"><span class="built_in">print</span>(f1(p: <span class="string">&quot;lemon&quot;</span>)) <span class="comment">// String lemon is not empty.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// guard let</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f2</span>(<span class="params">p1</span>: <span class="type">String</span>?) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> p2 <span class="operator">=</span> p1 <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Nil.&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;String <span class="subst">\(p2)</span> is not nil.&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f2(p1: <span class="literal">nil</span>)) <span class="comment">// Nil.</span></span><br><span class="line"><span class="built_in">print</span>(f2(p1: <span class="string">&quot;lemon&quot;</span>)) <span class="comment">// String lemon is not nil.</span></span><br></pre></td></tr></table></figure></div>
<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a <span class="operator">=</span> [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> str <span class="keyword">in</span> a &#123;</span><br><span class="line">    <span class="built_in">print</span>(str)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.forEach &#123; str <span class="keyword">in</span></span><br><span class="line">    <span class="built_in">print</span>(str)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用下标范围</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="number">10</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">...</span><span class="number">9</span> &#123; </span><br><span class="line">    <span class="built_in">print</span>(i) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 enumerated，i 是下标，str 是元素</span></span><br><span class="line"><span class="keyword">for</span> (i, str) <span class="keyword">in</span> a.enumerated() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;第<span class="subst">\(i <span class="operator">+</span> <span class="number">1</span>)</span>个是:<span class="subst">\(str)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for in where</span></span><br><span class="line"><span class="keyword">for</span> str <span class="keyword">in</span> a <span class="keyword">where</span> str.prefix(<span class="number">1</span>) <span class="operator">==</span> <span class="string">&quot;t&quot;</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(str)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字典 for in，遍历是无序的</span></span><br><span class="line"><span class="keyword">let</span> dic <span class="operator">=</span> [</span><br><span class="line">    <span class="string">&quot;one&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;two&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;three&quot;</span>: <span class="number">3</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (k, v) <span class="keyword">in</span> dic &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;key is <span class="subst">\(k)</span>, value is <span class="subst">\(v)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dic.forEach &#123; (k, v) <span class="keyword">in</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;key is <span class="subst">\(k)</span>, value is <span class="subst">\(v)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// stride</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">stride</span>(from: <span class="number">10</span>, through: <span class="number">0</span>, by: <span class="operator">-</span><span class="number">2</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 10</span></span><br><span class="line"><span class="comment"> 8</span></span><br><span class="line"><span class="comment"> 6</span></span><br><span class="line"><span class="comment"> 4</span></span><br><span class="line"><span class="comment"> 2</span></span><br><span class="line"><span class="comment"> 0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// 在循环中使用 continue 和 break</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="number">10</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i <span class="operator">%</span> <span class="number">2</span> <span class="operator">==</span> <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在循环中使用 where</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="number">10</span> <span class="keyword">where</span> i <span class="operator">%</span> <span class="number">2</span> <span class="operator">==</span> <span class="number">0</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="While"><a href="#While" class="headerlink" title="While"></a>While</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// while</span></span><br><span class="line"><span class="keyword">var</span> i1 <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">while</span> i1 <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;positive even number <span class="subst">\(i1)</span>&quot;</span>)</span><br><span class="line">    i1 <span class="operator">-=</span> <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// repeat while</span></span><br><span class="line"><span class="keyword">var</span> i2 <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">repeat</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;positive even number <span class="subst">\(i2)</span>&quot;</span>)</span><br><span class="line">    i2 <span class="operator">-=</span> <span class="number">2</span></span><br><span class="line">&#125; <span class="keyword">while</span> i2 <span class="operator">&gt;</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></div>
<p>使用 break 结束遍历，使用 continue 跳过当前作用域，继续下个循环</p>
<h3 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">f1</span>(<span class="params">pa</span>: <span class="type">String</span>, <span class="params">t</span>:(<span class="type">String</span>, <span class="type">Int</span>)) &#123;</span><br><span class="line">    <span class="keyword">var</span> p1 <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> p2 <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">    <span class="keyword">switch</span> pa &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;one&quot;</span>:</span><br><span class="line">        p1 <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;two&quot;</span>:</span><br><span class="line">        p1 <span class="operator">=</span> <span class="number">2</span></span><br><span class="line">        <span class="keyword">fallthrough</span> <span class="comment">// 继续到下个 case 中</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        p2 <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;p1 is <span class="subst">\(p1)</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;p2 is <span class="subst">\(p2)</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 元组</span></span><br><span class="line">    <span class="keyword">switch</span> t &#123;</span><br><span class="line">    <span class="keyword">case</span> (<span class="string">&quot;0&quot;</span>, <span class="number">0</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;zero&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> (<span class="string">&quot;1&quot;</span>, <span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;one&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;no&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1(pa: <span class="string">&quot;two&quot;</span>, t:(<span class="string">&quot;1&quot;</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> p1 is 2</span></span><br><span class="line"><span class="comment"> p2 is 0</span></span><br><span class="line"><span class="comment"> one</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">E</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> one, two, three, unknown(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f2</span>(<span class="params">pa</span>: <span class="type">E</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> p: <span class="type">String</span></span><br><span class="line">    <span class="keyword">switch</span> pa &#123;</span><br><span class="line">    <span class="keyword">case</span> .one:</span><br><span class="line">        p <span class="operator">=</span> <span class="string">&quot;1&quot;</span></span><br><span class="line">    <span class="keyword">case</span> .two:</span><br><span class="line">        p <span class="operator">=</span> <span class="string">&quot;2&quot;</span></span><br><span class="line">    <span class="keyword">case</span> .three:</span><br><span class="line">        p <span class="operator">=</span> <span class="string">&quot;3&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .unknown(u) <span class="keyword">where</span> <span class="type">Int</span>(u) <span class="operator">??</span> <span class="number">0</span> <span class="operator">&gt;</span> <span class="number">0</span> : <span class="comment">// 枚举关联值，使用 where 增加条件</span></span><br><span class="line">        p <span class="operator">=</span> u</span><br><span class="line">    <span class="keyword">case</span> .unknown(<span class="keyword">_</span>):</span><br><span class="line">        p <span class="operator">=</span> <span class="string">&quot;negative number&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(p)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f2(pa: <span class="type">E</span>.one) <span class="comment">// 1</span></span><br><span class="line">f2(pa: <span class="type">E</span>.unknown(<span class="string">&quot;10&quot;</span>)) <span class="comment">// 10</span></span><br><span class="line">f2(pa: <span class="type">E</span>.unknown(<span class="string">&quot;-10&quot;</span>)) <span class="comment">// negative number</span></span><br></pre></td></tr></table></figure></div>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>数组是有序集合</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a0: [<span class="type">Int</span>] <span class="operator">=</span> [<span class="number">1</span>, <span class="number">10</span>]</span><br><span class="line">a0.append(<span class="number">2</span>)</span><br><span class="line">a0.remove(at: <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(a0) <span class="comment">// [10, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a1 <span class="operator">=</span> [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> a2 <span class="operator">=</span> [<span class="string">&quot;three&quot;</span>, <span class="string">&quot;four&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 找两个集合的不同</span></span><br><span class="line"><span class="keyword">let</span> dif <span class="operator">=</span> a1.difference(from: a2) <span class="comment">// swift的 diffing 算法在这 http://www.xmailserver.org/diff2.pdf swift实现在  swift/stdlib/public/core/Diffing.swift</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> dif &#123;</span><br><span class="line">    <span class="keyword">switch</span> c &#123;</span><br><span class="line">    <span class="keyword">case</span> .remove(<span class="keyword">let</span> o, <span class="keyword">let</span> e, <span class="keyword">let</span> a):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;offset:<span class="subst">\(o)</span>, element:<span class="subst">\(e)</span>, associatedWith:<span class="subst">\(String(describing: a))</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> .insert(<span class="keyword">let</span> o, <span class="keyword">let</span> e, <span class="keyword">let</span> a):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;offset:<span class="subst">\(o)</span>, element:<span class="subst">\(e)</span>, associatedWith:<span class="subst">\(String(describing: a))</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> remove offset:1, element:four, associatedWith:nil</span></span><br><span class="line"><span class="comment"> insert offset:0, element:one, associatedWith:nil</span></span><br><span class="line"><span class="comment"> insert offset:1, element:two, associatedWith:nil</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> a3 <span class="operator">=</span> a2.applying(dif) <span class="operator">??</span> [] <span class="comment">// 可以用于添加删除动画</span></span><br><span class="line"><span class="built_in">print</span>(a3) <span class="comment">// [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;]</span></span><br></pre></td></tr></table></figure></div>
<p>dif 有第三个 case 值 .insert(let offset, let element, let associatedWith) 可以跟踪成对的变化，用于高级动画。</p>
<p>从数组中随机取一个元素</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a0.randomElement() <span class="operator">??</span> <span class="number">0</span>)</span><br></pre></td></tr></table></figure></div>
<p>数组排序</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 排序</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S1</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> n: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> b <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a4 <span class="operator">=</span> [</span><br><span class="line">    <span class="type">S1</span>(n: <span class="number">1</span>),</span><br><span class="line">    <span class="type">S1</span>(n: <span class="number">10</span>),</span><br><span class="line">    <span class="type">S1</span>(n: <span class="number">3</span>),</span><br><span class="line">    <span class="type">S1</span>(n: <span class="number">2</span>)</span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> a5 <span class="operator">=</span> a4.sorted &#123; i1, i2 <span class="keyword">in</span></span><br><span class="line">    i1.n <span class="operator">&lt;</span> i2.n</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> a5 &#123;</span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/// S1(n: 1)</span></span><br><span class="line"><span class="comment">/// S1(n: 2)</span></span><br><span class="line"><span class="comment">/// S1(n: 3)</span></span><br><span class="line"><span class="comment">/// S1(n: 10)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a6 <span class="operator">=</span> [<span class="number">1</span>,<span class="number">10</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(a6.sorted(by: <span class="operator">&gt;</span>)) <span class="comment">// [10, 7, 4, 2, 1]</span></span><br></pre></td></tr></table></figure></div>
<p>可以加到数组扩展中，通过扩展约束能够指定特定元素类型的排序，代码如下：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Array</span> <span class="keyword">where</span> <span class="type">Element</span> <span class="operator">==</span> <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="comment">// 升序</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">intSortedASC</span>() -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.sorted(by: <span class="operator">&lt;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 降序</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">intSortedDESC</span>() -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.sorted(by: <span class="operator">&lt;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a6.intSortedASC()) <span class="comment">// 使用扩展增加自定义排序能力</span></span><br></pre></td></tr></table></figure></div>
<p>在数组中检索满足条件的元素，代码如下：</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一个满足条件了就返回</span></span><br><span class="line"><span class="keyword">let</span> a7 <span class="operator">=</span> a4.first &#123;</span><br><span class="line">    <span class="variable">$0</span>.n <span class="operator">==</span> <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(a7<span class="operator">?</span>.n <span class="operator">??</span> <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否都满足了条件</span></span><br><span class="line"><span class="built_in">print</span>(a4.allSatisfy &#123; <span class="variable">$0</span>.n <span class="operator">==</span> <span class="number">1</span> &#125;) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(a4.allSatisfy(\.b)) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 找出最大的那个</span></span><br><span class="line"><span class="built_in">print</span>(a4.max(by: &#123; e1, e2 <span class="keyword">in</span></span><br><span class="line">    e1.n <span class="operator">&lt;</span> e2.n</span><br><span class="line">&#125;) <span class="operator">??</span> <span class="type">S1</span>(n: <span class="number">0</span>))</span><br><span class="line"><span class="comment">// S1(n: 10, b: true)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 看看是否包含某个元素</span></span><br><span class="line"><span class="built_in">print</span>(a4.contains(where: &#123;</span><br><span class="line">    <span class="variable">$0</span>.n <span class="operator">==</span> <span class="number">7</span></span><br><span class="line">&#125;))</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure></div>
<p>一些切割数组的方法。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切片</span></span><br><span class="line"><span class="comment">// 取前3个，并不是直接复制，对于大的数组有性能优势。</span></span><br><span class="line"><span class="built_in">print</span>(a6[<span class="operator">..&lt;</span><span class="number">3</span>]) <span class="comment">// [1, 10, 4] 需要做越界检查</span></span><br><span class="line"><span class="built_in">print</span>(a6.prefix(<span class="number">30</span>)) <span class="comment">// [1, 10, 4, 7, 2] 不需要做越界检查，也是切片，性能一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 去掉前3个</span></span><br><span class="line"><span class="built_in">print</span>(a6.dropFirst(<span class="number">3</span>)) <span class="comment">// [7, 2]</span></span><br></pre></td></tr></table></figure></div>
<p>prefix(while:) 和 drop(while:) 方法，顺序遍历执行闭包里的逻辑判断，满足条件就返回，遇到不匹配就会停止遍历。prefix 返回满足条件的元素集合，drop 返回停止遍历之后那些元素集合。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a8 <span class="operator">=</span> [<span class="number">8</span>, <span class="number">9</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">35</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> a9 <span class="operator">=</span> a8.prefix &#123;</span><br><span class="line">    <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(a9) <span class="comment">// [8, 9, 20, 1]</span></span><br><span class="line"><span class="keyword">let</span> a10 <span class="operator">=</span> a8.drop &#123;</span><br><span class="line">    <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(a10) <span class="comment">// [35, 3]</span></span><br></pre></td></tr></table></figure></div>
<p>比 filter 更高效的删除元素的方法 removeAll</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除所有不满足条件的元素</span></span><br><span class="line"><span class="keyword">var</span> a11 <span class="operator">=</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">25</span>]</span><br><span class="line">a11.removeAll &#123; <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="number">10</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(a11) <span class="comment">// [12, 25]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建未初始化的数组</span></span><br><span class="line"><span class="keyword">let</span> a12 <span class="operator">=</span> (<span class="number">0</span><span class="operator">...</span><span class="number">4</span>).map &#123; <span class="keyword">_</span> <span class="keyword">in</span></span><br><span class="line">    <span class="type">Int</span>.random(in: <span class="number">0</span><span class="operator">...</span><span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(a12) <span class="comment">// [0, 3, 3, 2, 5] 随机</span></span><br></pre></td></tr></table></figure></div>
<p>#if 用于后缀表达式</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #if 用于后缀表达式</span></span><br><span class="line"><span class="keyword">let</span> a13 <span class="operator">=</span> a11</span><br><span class="line"><span class="keyword">#if</span> os(iOS)</span><br><span class="line">    .count</span><br><span class="line"><span class="keyword">#else</span></span><br><span class="line">    .reduce(<span class="number">0</span>, <span class="operator">+</span>)</span><br><span class="line"><span class="keyword">#endif</span></span><br><span class="line"><span class="built_in">print</span>(a13) <span class="comment">//37</span></span><br></pre></td></tr></table></figure></div>
<h3 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a>Sets</h3><p>Set 是无序集合，元素唯一</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s0: <span class="type">Set</span>&lt;<span class="type">Int</span>&gt; <span class="operator">=</span> [<span class="number">2</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> s1: <span class="type">Set</span> <span class="operator">=</span> [<span class="number">2</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">8</span>]</span><br><span class="line"><span class="keyword">let</span> s2: <span class="type">Set</span> <span class="operator">=</span> [<span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s3 <span class="operator">=</span> s1.union(s2) <span class="comment">// 合集</span></span><br><span class="line"><span class="keyword">let</span> s4 <span class="operator">=</span> s1.intersection(s2) <span class="comment">// 交集</span></span><br><span class="line"><span class="keyword">let</span> s5 <span class="operator">=</span> s1.subtracting(s2) <span class="comment">// 非交集部分</span></span><br><span class="line"><span class="keyword">let</span> s6 <span class="operator">=</span> s1.symmetricDifference(s2) <span class="comment">// 非交集的合集</span></span><br><span class="line"><span class="built_in">print</span>(s3) <span class="comment">// [4, 2, 1, 7, 3, 10, 8, 9, 6, 5]</span></span><br><span class="line"><span class="built_in">print</span>(s4) <span class="comment">// [10]</span></span><br><span class="line"><span class="built_in">print</span>(s5) <span class="comment">// [8, 4, 2, 6]</span></span><br><span class="line"><span class="built_in">print</span>(s6) <span class="comment">// [9, 1, 3, 4, 5, 2, 6, 8, 7]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// s0 是否被 s1 包含</span></span><br><span class="line"><span class="built_in">print</span>(s0.isSubset(of: s1)) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// s1 是否包含了 s0</span></span><br><span class="line"><span class="built_in">print</span>(s1.isSuperset(of: s0)) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s7: <span class="type">Set</span> <span class="operator">=</span> [<span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line"><span class="comment">// s0 和 s7 是否有交集</span></span><br><span class="line"><span class="built_in">print</span>(s0.isDisjoint(with: s7)) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可变 Set</span></span><br><span class="line"><span class="keyword">var</span> s8: <span class="type">Set</span> <span class="operator">=</span> [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>]</span><br><span class="line">s8.insert(<span class="string">&quot;three&quot;</span>)</span><br><span class="line">s8.remove(<span class="string">&quot;one&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s8) <span class="comment">// [&quot;two&quot;, &quot;three&quot;]</span></span><br></pre></td></tr></table></figure></div>
<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><p>字典是无序集合，键值对应。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 <span class="operator">=</span> [</span><br><span class="line">    <span class="string">&quot;k1&quot;</span>: <span class="string">&quot;v1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;k2&quot;</span>: <span class="string">&quot;v2&quot;</span></span><br><span class="line">]</span><br><span class="line">d1[<span class="string">&quot;k3&quot;</span>] <span class="operator">=</span> <span class="string">&quot;v3&quot;</span></span><br><span class="line">d1[<span class="string">&quot;k4&quot;</span>] <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d1) <span class="comment">// [&quot;k2&quot;: &quot;v2&quot;, &quot;k3&quot;: &quot;v3&quot;, &quot;k1&quot;: &quot;v1&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (k, v) <span class="keyword">in</span> d1 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;key is <span class="subst">\(k)</span>, value is <span class="subst">\(v)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> key is k1, value is v1</span></span><br><span class="line"><span class="comment"> key is k2, value is v2</span></span><br><span class="line"><span class="comment"> key is k3, value is v3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> d1.isEmpty <span class="operator">==</span> <span class="literal">false</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(d1.count) <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mapValues</span></span><br><span class="line"><span class="keyword">let</span> d2 <span class="operator">=</span> d1.mapValues &#123;</span><br><span class="line">    <span class="variable">$0</span> <span class="operator">+</span> <span class="string">&quot;_new&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(d2) <span class="comment">// [&quot;k2&quot;: &quot;v2_new&quot;, &quot;k3&quot;: &quot;v3_new&quot;, &quot;k1&quot;: &quot;v1_new&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对字典的值或键进行分组</span></span><br><span class="line"><span class="keyword">let</span> d3 <span class="operator">=</span> <span class="type">Dictionary</span>(grouping: d1.values) &#123;</span><br><span class="line">    <span class="variable">$0</span>.count</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(d3) <span class="comment">// [2: [&quot;v1&quot;, &quot;v2&quot;, &quot;v3&quot;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 从字典中取值，如果键对应无值，则使用通过 default 指定的默认值</span></span><br><span class="line">d1[<span class="string">&quot;k5&quot;</span>, <span class="keyword">default</span>: <span class="string">&quot;whatever&quot;</span>] <span class="operator">+=</span> <span class="string">&quot;.&quot;</span></span><br><span class="line"><span class="built_in">print</span>(d1[<span class="string">&quot;k5&quot;</span>] <span class="operator">??</span> <span class="string">&quot;&quot;</span>) <span class="comment">// whatever.</span></span><br><span class="line"><span class="keyword">let</span> v1 <span class="operator">=</span> d1[<span class="string">&quot;k3&quot;</span>, <span class="keyword">default</span>: <span class="string">&quot;whatever&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment">// v3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// compactMapValues() 对字典值进行转换和解包。可以解可选类型，并去掉 nil 值</span></span><br><span class="line"><span class="keyword">let</span> d4 <span class="operator">=</span> [</span><br><span class="line">    <span class="string">&quot;k1&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;k2&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;k3&quot;</span>: <span class="literal">nil</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> d5 <span class="operator">=</span> d4.mapValues &#123; <span class="variable">$0</span> &#125;</span><br><span class="line"><span class="keyword">let</span> d6 <span class="operator">=</span> d4.compactMapValues&#123; <span class="variable">$0</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(d5)</span><br><span class="line"><span class="comment">// [&quot;k3&quot;: nil, &quot;k1&quot;: Optional(1), &quot;k2&quot;: Optional(2)]</span></span><br><span class="line"><span class="built_in">print</span>(d6)</span><br><span class="line"><span class="comment">// [&quot;k1&quot;: 1, &quot;k2&quot;: 2]</span></span><br></pre></td></tr></table></figure></div>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><h3 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i1 <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> i2 <span class="operator">=</span> i1</span><br><span class="line">i2 <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(i2) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">i2 <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(i2) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">i2 <span class="operator">-=</span> <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(i2) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">i2 <span class="operator">*=</span> <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(i2) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">i2 <span class="operator">/=</span> <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(i2) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure></div>
<h3 id="计算符"><a href="#计算符" class="headerlink" title="计算符"></a>计算符</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i1 <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> i2 <span class="operator">=</span> i1</span><br><span class="line"><span class="built_in">print</span>((i1 <span class="operator">+</span> i2 <span class="operator">-</span> <span class="number">1</span>) <span class="operator">*</span> <span class="number">10</span> <span class="operator">/</span> <span class="number">2</span> <span class="operator">%</span> <span class="number">3</span>) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;i&quot;</span> <span class="operator">+</span> <span class="string">&quot;1&quot;</span>) <span class="comment">// i1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一元运算符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="operator">-</span>i1) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure></div>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p>遵循 Equatable 协议可以使用 &#x3D;&#x3D; 和 !&#x3D; 来判断是否相等</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">1</span> <span class="operator">&gt;</span> <span class="number">2</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span>: <span class="title class_ inherited__">Equatable</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p1: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> p2: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> s1 <span class="operator">=</span> <span class="type">S</span>(p1: <span class="string">&quot;one&quot;</span>, p2: <span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> s2 <span class="operator">=</span> <span class="type">S</span>(p1: <span class="string">&quot;two&quot;</span>, p2: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">let</span> s3 <span class="operator">=</span> <span class="type">S</span>(p1: <span class="string">&quot;one&quot;</span>, p2: <span class="number">2</span>)</span><br><span class="line"><span class="keyword">let</span> s4 <span class="operator">=</span> <span class="type">S</span>(p1: <span class="string">&quot;one&quot;</span>, p2: <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s1 <span class="operator">==</span> s2) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(s1 <span class="operator">==</span> s3) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(s1 <span class="operator">==</span> s4) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div>
<p>类需要实现 &#x3D;&#x3D; 函数</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>: <span class="title class_ inherited__">Equatable</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p1: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> p2: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">p1</span>: <span class="type">String</span>, <span class="params">p2</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.p1 <span class="operator">=</span> p1</span><br><span class="line">        <span class="keyword">self</span>.p2 <span class="operator">=</span> p2</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">==</span> (<span class="params">l</span>: <span class="type">C</span>, <span class="params">r</span>: <span class="type">C</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> l.p1 <span class="operator">==</span> r.p1 <span class="operator">&amp;&amp;</span> l.p2 <span class="operator">==</span> r.p2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c1 <span class="operator">=</span> <span class="type">C</span>(p1: <span class="string">&quot;one&quot;</span>, p2: <span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> c2 <span class="operator">=</span> <span class="type">C</span>(p1: <span class="string">&quot;one&quot;</span>, p2: <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(c1 <span class="operator">==</span> c2)</span><br><span class="line"><span class="comment">// 元组比较</span></span><br><span class="line"><span class="comment">// 会先比较第一个数，第一个无法比较才会比较第二个数</span></span><br><span class="line"><span class="comment">// 字符串比较和字母大小还有长度有关。先比较字母大小，在比较长度</span></span><br><span class="line">(<span class="string">&quot;apple&quot;</span>, <span class="number">1</span>) <span class="operator">&lt;</span> (<span class="string">&quot;apple&quot;</span>, <span class="number">2</span>) <span class="comment">// true</span></span><br><span class="line">(<span class="string">&quot;applf&quot;</span>, <span class="number">1</span>) <span class="operator">&lt;</span> (<span class="string">&quot;apple&quot;</span>, <span class="number">2</span>) <span class="comment">// false</span></span><br><span class="line">(<span class="string">&quot;appl&quot;</span>, <span class="number">2</span>) <span class="operator">&lt;</span> (<span class="string">&quot;apple&quot;</span>, <span class="number">1</span>) <span class="comment">// true</span></span><br><span class="line">(<span class="string">&quot;appm&quot;</span>, <span class="number">2</span>) <span class="operator">&lt;</span> (<span class="string">&quot;apple&quot;</span>, <span class="number">1</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></div>
<h3 id="三元"><a href="#三元" class="headerlink" title="三元"></a>三元</h3><p>简化 if else 写法</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if else</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f1</span>(<span class="params">p</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> p <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;positive number&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;negative number&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 三元</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f2</span>(<span class="params">p</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">    p <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">?</span> <span class="built_in">print</span>(<span class="string">&quot;positive number&quot;</span>) : <span class="built_in">print</span>(<span class="string">&quot;negative number&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1(p: <span class="number">1</span>)</span><br><span class="line">f2(p: <span class="number">1</span>)</span><br></pre></td></tr></table></figure></div>
<h3 id="coalescing"><a href="#coalescing" class="headerlink" title="coalescing"></a>coalescing</h3><p>简化 if let else 写法</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if else</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f1</span>(<span class="params">p</span>: <span class="type">Int</span>?) &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> i <span class="operator">=</span> p &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;p have value is <span class="subst">\(i)</span>&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;p is nil, use defalut value&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 ??</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">f2</span>(<span class="params">p</span>: <span class="type">Int</span>?) &#123;</span><br><span class="line">    <span class="keyword">let</span> i <span class="operator">=</span> p <span class="operator">??</span> <span class="number">0</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;p is <span class="subst">\(i)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="范围"><a href="#范围" class="headerlink" title="范围"></a>范围</h3><p>简化的值范围表达方式。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封闭范围</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">...</span><span class="number">10</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 半开范围</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="number">10</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单侧区间</span></span><br><span class="line"><span class="keyword">let</span> nums <span class="operator">=</span> [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line"><span class="built_in">print</span>(nums[<span class="number">2</span><span class="operator">...</span>]) <span class="comment">// 7 8</span></span><br></pre></td></tr></table></figure></div>
<h3 id="逻辑"><a href="#逻辑" class="headerlink" title="逻辑"></a>逻辑</h3><div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i1 <span class="operator">=</span> <span class="operator">-</span><span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> i2 <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i1 <span class="operator">!=</span> i2 <span class="operator">&amp;&amp;</span> (i1 <span class="operator">&lt;</span> <span class="number">0</span> <span class="operator">||</span> i2 <span class="operator">&lt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;i1 and i2 not equal, and one of them is negative number.&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="恒等"><a href="#恒等" class="headerlink" title="恒等"></a>恒等</h3><p>恒等返回是否引用了相同实例。</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">p</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.p <span class="operator">=</span> p</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c1 <span class="operator">=</span> <span class="type">C</span>(p: <span class="string">&quot;one&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> c2 <span class="operator">=</span> <span class="type">C</span>(p: <span class="string">&quot;one&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> c3 <span class="operator">=</span> c1</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(c1 <span class="operator">===</span> c2) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(c1 <span class="operator">===</span> c3) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">print</span>(c1 <span class="operator">!==</span> c2) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p>位运算符</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i1: <span class="type">UInt8</span> <span class="operator">=</span> <span class="number">0b00001111</span></span><br><span class="line"><span class="keyword">let</span> i2 <span class="operator">=</span> <span class="operator">~</span>i1 <span class="comment">// Bitwise NOT Operator（按位取反运算符），取反</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> i3: <span class="type">UInt8</span> <span class="operator">=</span> <span class="number">0b00111111</span></span><br><span class="line"><span class="keyword">let</span> i4 <span class="operator">=</span> i1 <span class="operator">&amp;</span> i3 <span class="comment">// Bitwise AND Operator（按位与运算符），都为1才是1</span></span><br><span class="line"><span class="keyword">let</span> i5 <span class="operator">=</span> i1 <span class="operator">|</span> i3 <span class="comment">// Bitwise OR Operator（按位或运算符），有一个1就是1</span></span><br><span class="line"><span class="keyword">let</span> i6 <span class="operator">=</span> i1 <span class="operator">^</span> i3 <span class="comment">// Bitwise XOR Operator（按位异或运算符），不同为1，相同为0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(i1,i2,i3,i4,i5,i6)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;&lt; 按位左移，&gt;&gt; 按位右移</span></span><br><span class="line"><span class="keyword">let</span> i7 <span class="operator">=</span> i1 <span class="operator">&lt;&lt;</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> i8 <span class="operator">=</span> i1 <span class="operator">&gt;&gt;</span> <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(i7,i8)</span><br></pre></td></tr></table></figure></div>
<p>溢出运算符，有 &amp;+、&amp;- 和 &amp;*</p>
<div class="code-container" data-rel="Swift"><figure class="iseeu highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i1 <span class="operator">=</span> <span class="type">Int</span>.max</span><br><span class="line"><span class="built_in">print</span>(i1) <span class="comment">// 9223372036854775807</span></span><br><span class="line">i1 <span class="operator">=</span> i1 <span class="operator">&amp;+</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(i1) <span class="comment">// -9223372036854775808</span></span><br><span class="line">i1 <span class="operator">=</span> i1 <span class="operator">&amp;+</span> <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(i1) <span class="comment">// -9223372036854775798</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i2 <span class="operator">=</span> <span class="type">UInt</span>.max</span><br><span class="line">i2 <span class="operator">=</span> i2 <span class="operator">&amp;+</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(i2) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure></div>
<p>运算符函数包括前缀运算符、后缀运算符、复合赋值运算符以及等价运算符。另，还可以自定义运算符，新的运算符要用 operator 关键字进行定义，同时要指定 prefix、infix 或者 postfix 修饰符。</p>
<h2 id="Swift规范"><a href="#Swift规范" class="headerlink" title="Swift规范"></a>Swift规范</h2><p>参考：</p>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="https://google.github.io/swift/" >Swift Style Guide<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
<p>多用静态特性。swift 在编译期间所做的优化比 OC 要多，这是由于他的静态派发、泛型特化、写时复制这些静态特性决定的。另外通过 final 和 private 这样的表示可将动态特性转化为静态方式，编译开启 WMO 可以自动推导出哪些动态派发可转化为静态派发。</p>
<p>如何避免崩溃？</p>
<ul>
<li>字典：用结构体替代</li>
<li>Any：可用泛型或关联关联类型替代</li>
<li>as? ：少用 AnyObject，多用泛型或不透明类型</li>
<li>!：要少用</li>
</ul>
<p>好的实践？</p>
<ul>
<li>少用继承，多用 protocol</li>
<li>多用 extension 对自己代码进行管理</li>
</ul>
<h2 id="Swift书单"><a href="#Swift书单" class="headerlink" title="Swift书单"></a>Swift书单</h2><ul>
<li>《Thinking in SwiftUI》</li>
<li>《Swift 进阶》</li>
<li>《函数式Swift》</li>
<li>《深入解析Mac OS X &amp; iOS操作系统》</li>
<li>《LLVM Techniques, Tips, and Best Practices Clang and Middle-End Libraries》</li>
<li>《Learn LLVM 12》</li>
<li>《Crafting Interpreters》</li>
<li>《TCP&#x2F;IP Illustrated》</li>
<li>《松本行弘的程序世界》</li>
<li>《现代操作系统》</li>
<li>《深入理解计算机系统》</li>
<li>《程序员的自我修养》</li>
<li>《Head First 设计模式》</li>
</ul>

		</div>

		

		

		

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			<div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="prev" rel="prev" href="/2025/05/07/%E9%81%BF%E5%85%8D%E8%A7%86%E5%9B%BE%E7%BB%98%E5%88%B6%E6%8E%89%E5%B8%A7/">
					<span class="left arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-left"></i>
					</span>
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">避免视图绘制掉帧</span>
						<span class="post-nav-item">Prev posts</span>
					</span>
				</a>
			</div>
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/2025/05/07/Day9-%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">Day9-只出现一次的数字</span>
						<span class="post-nav-item">Next posts</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">On this page</div>
		<div class="page-title">Swift 语法</div>
		<ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80"><span class="nav-text">语法基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F"><span class="nav-text">变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8D%B0"><span class="nav-text">打印</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E9%87%8A"><span class="nav-text">注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E9%80%89"><span class="nav-text">!?可选</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AD%E5%8C%85"><span class="nav-text">闭包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-text">函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="nav-text">访问控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Regex"><span class="nav-text">Regex</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B"><span class="nav-text">基础类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%AD%97"><span class="nav-text">数字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E6%95%B0"><span class="nav-text">布尔数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE"><span class="nav-text">枚举</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%83%E7%BB%84"><span class="nav-text">元组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B%E5%92%8C%E5%8D%8F%E8%AE%AE"><span class="nav-text">泛型和协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E9%80%8F%E6%98%8E%E7%B1%BB%E5%9E%8B"><span class="nav-text">不透明类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Result"><span class="nav-text">Result</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="nav-text">类型转换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E5%92%8C%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-text">类和结构体</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB"><span class="nav-text">类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-text">结构体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7"><span class="nav-text">属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95"><span class="nav-text">方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%A7%E6%89%BF"><span class="nav-text">继承</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F"><span class="nav-text">函数式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#map"><span class="nav-text">map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#filter"><span class="nav-text">filter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reduce"><span class="nav-text">reduce</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sorted"><span class="nav-text">sorted</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E6%B5%81"><span class="nav-text">控制流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#If"><span class="nav-text">If</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Guard"><span class="nav-text">Guard</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%8D%E5%8E%86"><span class="nav-text">遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#While"><span class="nav-text">While</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Switch"><span class="nav-text">Switch</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%86%E5%90%88"><span class="nav-text">集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-text">数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sets"><span class="nav-text">Sets</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E5%85%B8"><span class="nav-text">字典</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-text">操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC"><span class="nav-text">赋值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E7%AC%A6"><span class="nav-text">计算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">比较运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E5%85%83"><span class="nav-text">三元</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#coalescing"><span class="nav-text">coalescing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8C%83%E5%9B%B4"><span class="nav-text">范围</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91"><span class="nav-text">逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%81%92%E7%AD%89"><span class="nav-text">恒等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift%E8%A7%84%E8%8C%83"><span class="nav-text">Swift规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift%E4%B9%A6%E5%8D%95"><span class="nav-text">Swift书单</span></a></li></ol>

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<!-- <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2025</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">YVTU</a>
            
        </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a></span>
            <span class="text-sm lg:block">THEME&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.2</a></span>
        </div>
        
        
        
        
        
    </div>  
</footer> -->
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="fa-regular fa-arrow-up"></i>
		</li>
		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	
	<div class="search-pop-overlay">
	<div class="popup search-popup">
		<div class="search-header">
			<span class="search-input-field-pre">
				<i class="fa-solid fa-keyboard"></i>
			</span>
			<div class="search-input-container">
				<input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Search..." spellcheck="false" type="search" class="search-input">
			</div>
			<span class="popup-btn-close">
				<i class="fa-solid fa-times"></i>
			</span>
		</div>
		<div id="search-result">
			<div id="no-result">
				<i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
			</div>
		</div>
	</div>
</div>
	

</main>



<script src="/js/build/libs/Swup.min.js"></script>

<script src="/js/build/libs/SwupSlideTheme.min.js"></script>

<script src="/js/build/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/build/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/build/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/build/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	
<script src="/js/build/tools/imageViewer.js" type="module"></script>

<script src="/js/build/utils.js" type="module"></script>

<script src="/js/build/main.js" type="module"></script>

<script src="/js/build/layouts/navbarShrink.js" type="module"></script>

<script src="/js/build/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/build/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/build/layouts/categoryList.js" type="module"></script>



    
<script src="/js/build/tools/localSearch.js" type="module"></script>




    
<script src="/js/build/tools/codeBlock.js" type="module"></script>




    
<script src="/js/build/layouts/lazyload.js" type="module"></script>






  
<script src="/js/build/libs/Typed.min.js"></script>

  
<script src="/js/build/plugins/typed.js" type="module"></script>








    
<script src="/js/build/libs/anime.min.js"></script>





    
<script src="/js/build/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/build/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/build/layouts/essays.js" type="module" data-swup-reload-script=""></script>





    
<script src="/js/build/layouts/bookmarkNav.js" type="module"></script>


	
</body>

</html>